From f7a8afa878d163ae669b5dfc923e2c4d2993a49a Mon Sep 17 00:00:00 2001
From: Sergey Sharybin <sergey@blender.org>
Date: Tue, 06 Jun 2017 11:31:13 +0200
Subject: fix_ppc64el_FTBFS

---
 extern/clew/include/clew.h               | 2 +-
 extern/glog/src/stacktrace_powerpc-inl.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/extern/clew/include/clew.h b/extern/clew/include/clew.h
index 1f79c12481b..08040af4bc1 100644
--- a/extern/clew/include/clew.h
+++ b/extern/clew/include/clew.h
@@ -369,7 +369,7 @@ typedef unsigned int cl_GLenum;
 #endif
 
 /* Define basic vector types */
-#if defined( __VEC__ )
+#if defined( __VEC__ ) && !(defined(__PPC64__) && defined(__LITTLE_ENDIAN__))
    #include <altivec.h>   /* may be omitted depending on compiler. AltiVec spec provides no way to detect whether the header is required. */
    typedef vector unsigned char     __cl_uchar16;
    typedef vector signed char       __cl_char16;
diff --git a/extern/glog/src/stacktrace_powerpc-inl.h b/extern/glog/src/stacktrace_powerpc-inl.h
index 1090ddedbc7..03b91089aad 100644
--- a/extern/glog/src/stacktrace_powerpc-inl.h
+++ b/extern/glog/src/stacktrace_powerpc-inl.h
@@ -111,7 +111,7 @@ int GetStackTrace(void** result, int max_depth, int skip_count) {
       result[n++] = *(sp+2);
 #elif defined(_CALL_SYSV)
       result[n++] = *(sp+1);
-#elif defined(__APPLE__) || (defined(__linux) && defined(__PPC64__))
+#elif defined(__APPLE__) || ((defined(__linux) || defined(__linux__)) && defined(__PPC64__))
       // This check is in case the compiler doesn't define _CALL_AIX/etc.
       result[n++] = *(sp+2);
 #elif defined(__linux)
-- 
2.11.0

